// This is an autogenerated file from Firebase Studio.
'use server';

/**
 * @fileOverview Provides a job match prediction flow based on a job description and a resume.
 *
 * - jobMatchPrediction - A function that handles the job match prediction process.
 * - JobMatchPredictionInput - The input type for the jobMatchPrediction function.
 * - JobMatchPredictionOutput - The return type for the jobMatchPrediction function.
 */

import {ai} from '@/ai/genkit';
import {z} from 'genkit';

const JobMatchPredictionInputSchema = z.object({
  jobDescription: z.string().describe('The description of the job posting.'),
  resume: z.string().describe('The resume of the job seeker.'),
});
export type JobMatchPredictionInput = z.infer<typeof JobMatchPredictionInputSchema>;

const JobMatchPredictionOutputSchema = z.object({
  matchScore: z.number().describe('A score between 0 and 1 indicating how well the job matches the resume.'),
  reasons: z.string().describe('Key reasons why the job is a good fit for the resume.'),
});
export type JobMatchPredictionOutput = z.infer<typeof JobMatchPredictionOutputSchema>;

export async function jobMatchPrediction(input: JobMatchPredictionInput): Promise<JobMatchPredictionOutput> {
  return jobMatchPredictionFlow(input);
}

const jobMatchPredictionPrompt = ai.definePrompt({
  name: 'jobMatchPredictionPrompt',
  input: {schema: JobMatchPredictionInputSchema},
  output: {schema: JobMatchPredictionOutputSchema},
  prompt: `You are a job matching expert. Given a job description and a resume, determine how well the job matches the resume.

Job Description: {{{jobDescription}}}

Resume: {{{resume}}}

Provide a match score between 0 and 1, and key reasons why the job is a good fit for the resume.
Ensure the match score and reasons are based on concrete evidence from the job description and resume.
`,
});

const jobMatchPredictionFlow = ai.defineFlow(
  {
    name: 'jobMatchPredictionFlow',
    inputSchema: JobMatchPredictionInputSchema,
    outputSchema: JobMatchPredictionOutputSchema,
  },
  async input => {
    const {output} = await jobMatchPredictionPrompt(input);
    return output!;
  }
);
